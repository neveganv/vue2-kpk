(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6270e68f"],{"2de3":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"body"},[r("AdminWrapper",[r("AdminComponent")],1)],1)},s=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-auto"},[r("div",{staticClass:"d-flex justify-space-between p-1 align-center"},[r("VBtn",{attrs:{text:"",color:"primary"}},[e._v("Список користувачів")]),r("VBtn",{attrs:{color:"primary",outlined:""},on:{click:function(t){e.visible=!0}}},[r("VIcon",{attrs:{left:""}},[e._v("mdi-account-plus")]),e._v("Додати нового користувача")],1)],1),r("VDivider"),r("UsersList",{attrs:{users:e.users},on:{showEdit:e.showEdit,deleteUser:e.deleteUser}}),e.visible?r("add-users-dialog",{attrs:{visible:e.visible,chosenUser:e.chosenId},on:{close:function(t){e.visible=!1,e.chosenId=null},addUser:e.addUser,updateUser:e.updateUser}}):e._e()],1)},a=[],o=r("5530"),u=r("1da1"),l=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VDialog",{attrs:{persistent:e.edit},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[r("VCard",{attrs:{width:"700"}},[e.edit?r("VCardTitle",[e._v(" Редагувати користувача ")]):r("VCardTitle",[e._v(" Додати користувача ")]),r("VCardText",[r("VRow",[r("VCol",{attrs:{cols:"6"}},[r("VTextField",{attrs:{label:"Ім`я","prepend-icon":"mdi-account",outlined:"",dense:"","hide-details":!e.NameError.length,"error-messages":e.NameError},nativeOn:{input:function(t){return e.$v.user.name.$touch()}},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),r("VCol",{attrs:{cols:"6"}},[r("VTextField",{attrs:{label:"Прізвище",outlined:"",dense:"","hide-details":!e.SurnameError.length,"error-messages":e.SurnameError},nativeOn:{input:function(t){return e.$v.user.surname.$touch()}},model:{value:e.user.surname,callback:function(t){e.$set(e.user,"surname",t)},expression:"user.surname"}})],1)],1),r("VRow",[r("VCol",[r("VTextField",{attrs:{label:"Email","prepend-icon":"mdi-email",outlined:"",dense:"","hide-details":!e.EmailError.length,"error-messages":e.EmailError},on:{blur:function(t){return e.$v.user.email.$touch()}},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1),r("VRow",[r("VCol",[r("VTextField",{directives:[{name:"mask",rawName:"v-mask",value:"+## (###) ##-##-###",expression:"'+## (###) ##-##-###'"}],attrs:{label:"Телефон","prepend-icon":"mdi-phone",outlined:"",dense:"","return-masked-value":"","hide-details":!e.PhoneError.length,"error-messages":e.PhoneError},on:{blur:function(t){return e.$v.user.phone.$touch()}},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1)],1),r("VRow",[r("VCol",{attrs:{cols:"6"}},[r("v-select",{attrs:{"prepend-icon":"mdi-shield-account",items:Object.values(e.categories),"item-value":"_id","item-text":"title",label:"Посада",outlined:"",dense:"","hide-details":!e.PermissionError.length,"error-messages":e.PermissionError,clearable:""},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.item;return[r("v-chip",{attrs:{small:"",color:"primary"}},[e._v(e._s(n.title))])]}}]),model:{value:e.user.permission,callback:function(t){e.$set(e.user,"permission",t)},expression:"user.permission"}})],1),r("VCol",{attrs:{cols:"6"}},[r("VBtn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.visibleAdd=!0}}},[r("VIcon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("Додати нову посаду")],1)],1)],1)],1),r("VDivider"),r("VCardActions",[r("VSpacer"),r("VBtn",{attrs:{color:"error",text:""},on:{click:e.onCancel}},[e._v(" Скасувати ")]),e.edit?r("VBtn",{attrs:{color:"primary"},on:{click:e.onUpdate}},[e._v(" Оновити ")]):r("VBtn",{attrs:{color:"primary"},on:{click:e.onCreate}},[e._v(" Створити ")])],1)],1),e.visibleAdd?r("add-new-permission-dialog",{attrs:{visibleAdd:e.visibleAdd},on:{close:function(t){e.visibleAdd=!1},added:e.addedPosition}}):e._e()],1)}),c=[],d=(r("ac1f"),r("5319"),r("b0c0"),r("bae0")),m="/api/position",p={createPosition:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].post("".concat(m,"/add"),e);case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))()},getAll:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].post("".concat(m,"/getAll"));case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})))()}},v=r("6731"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VDialog",{attrs:{transition:"scroll-y-transition"},on:{"click:outside":function(t){return e.$v.$reset()}},model:{value:e.visibility,callback:function(t){e.visibility=t},expression:"visibility"}},[r("VCard",{attrs:{width:"500"}},[r("VCardTitle",[e._v(" Додати нову посаду ")]),r("VCardText",[r("VRow",[r("VCol",[r("VTextField",{attrs:{label:"Назва посади","prepend-icon":"mdi-shield-account",outlined:"",dense:"","hide-details":!e.NameError.length,"error-messages":e.NameError},model:{value:e.permission,callback:function(t){e.permission=t},expression:"permission"}})],1)],1)],1),r("VCardActions",[r("VSpacer"),r("VBtn",{attrs:{color:"primary"},on:{click:e.onCreate}},[e._v(" Додати посаду ")])],1)],1)],1)},f=[],b=r("1dce"),x=r("b5ae"),g={mixins:[b["validationMixin"]],validations:{permission:{required:x["required"]}},props:{visibleAdd:{require:!0}},data:function(){return{permission:""}},methods:{onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=14;break}return t.prev=2,r=[],r.title=e.permission,t.next=7,p.createPosition(Object(o["a"])({},r));case 7:n=t.sent,e.$emit("added",n),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),alert(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()}},computed:{NameError:function(){var e=[];return this.$v.permission.$dirty?(!this.$v.permission.required&&e.push("Назва посади обов`язкове поле для заповнення"),e):e},visibility:{get:function(){return this.visibleAdd},set:function(){this.permission="",this.$emit("close")}}}},$=g,_=r("2877"),w=Object(_["a"])($,h,f,!1,null,null,null),k=w.exports,V=function(e){return 13===e.replace(/[^+\d]/g,"").length},C={components:{AddNewPermissionDialog:k},name:"add-users-dialog",mixins:[b["validationMixin"]],props:{visible:{require:!0},chosenUser:{require:!1}},data:function(){return{categories:[],user:[],visibleAdd:!1,edit:!1}},validations:{user:{name:{required:x["required"]},surname:{required:x["required"]},phone:{required:x["required"],validPhone:V},email:{required:x["required"],email:x["email"]},permission:{required:x["required"]}}},mounted:function(){this.getChosenUser(),this.getPositions()},methods:{getChosenUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.chosenUser){t.next=18;break}return console.log(e.chosenUser),t.prev=2,e.edit=!0,t.next=6,v["a"].findUserById({id:e.chosenUser});case 6:r=t.sent,e.user=r,console.log(e.user),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),alert(t.t0);case 14:e.user.phone=e.user.phone.replace("+380",""),e.user.permission=e.user.position,t.next=19;break;case 18:e.edit=!1;case 19:case"end":return t.stop()}}),t,null,[[2,11]])})))()},getPositions:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.getAll();case 3:e.categories=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},onCancel:function(){this.user=[],this.$v.$reset(),this.$emit("close")},onCreate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=19;break}return t.prev=2,r=[],r.name=e.user.name,r.surname=e.user.surname,r.email=e.user.email,r.phone=e.user.phone,r.position=e.user.permission,t.next=11,v["a"].addNewUser(Object(o["a"])({},r));case 11:e.user=[],e.$emit("addUser"),e.$v.$reset(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](2),alert(t.t0);case 19:case"end":return t.stop()}}),t,null,[[2,16]])})))()},addedPosition:function(e){this.getPositions(),this.visibleAdd=!1},onUpdate:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.$touch(),e.$v.$invalid){t.next=20;break}return t.prev=2,r=[],r.id=e.user._id,r.name=e.user.name,r.surname=e.user.surname,r.email=e.user.email,r.phone=e.user.phone,r.position=e.user.permission,console.log(r),t.next=13,v["a"].update(Object(o["a"])({},r));case 13:e.$emit("updateUser",r),e.$v.$reset(),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](2),alert(t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})))()}},computed:{visibility:{get:function(){return this.visible},set:function(){this.$emit("close")}},NameError:function(){var e=[];return this.$v.user.name.$dirty?(!this.$v.user.name.required&&e.push("Заголовок обов`язкове поле для заповнення"),e):e},SurnameError:function(){var e=[];return this.$v.user.surname.$dirty?(!this.$v.user.surname.required&&e.push("Прізвище обов`язкове поле для заповлення"),e):e},PhoneError:function(){var e=[];return this.$v.user.phone.$dirty?this.$v.user.phone.validPhone?(!this.$v.user.phone.required&&e.push("Телефон обов`язкове поле для заповлення"),e):(e.push("Телефон повинен бути валідним"),e):e},EmailError:function(){var e=[];return this.$v.user.email.$dirty?this.$v.user.email.email?(!this.$v.user.email.required&&e.push("Пошта обов`язкове поле для заповлення"),e):(e.push("Пошта повинна бути валідна"),e):e},PermissionError:function(){var e=[];return this.$v.user.permission.$dirty?(!this.$v.user.permission.required&&e.push("Посада обов`язкове поле для заповлення"),e):e}}},U=C,y=Object(_["a"])(U,l,c,!1,null,null,null),E=y.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-simple-table",{staticClass:"p-1 my-table",scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("#")]),r("th",{staticClass:"text-left"},[e._v("Назва")]),r("th",{staticClass:"text-left"},[e._v("Телефон")]),r("th",{staticClass:"text-left"},[e._v("Пошта")]),r("th",{staticClass:"text-left"},[e._v("Посада")]),r("th",{staticClass:"text-left"},[e._v("Дія")])])]),r("tbody",e._l(e.users,(function(t,n){return r("tr",{key:t.id},[r("td",[e._v(e._s(n+1))]),r("td",[e._v(e._s(t.name||"--")+" "+e._s(t.surname||"--"))]),r("td",[e._v(e._s(t.phone||"--"))]),r("td",[e._v(e._s(t.email||"--"))]),r("td",[e._v(e._s(t.position.title||"--"))]),r("td",[r("VRow",[r("VBtn",{attrs:{small:"",color:"primary"},on:{click:function(r){return e.editUser(t)}}},[r("VIcon",[e._v(" mdi-account-edit")])],1),r("VBtn",{attrs:{small:"",color:"error"},on:{click:function(r){return e.deleteUser(t._id)}}},[r("VIcon",[e._v(" mdi-delete")])],1)],1)],1)])})),0)]},proxy:!0}])})},q=[],A={props:{users:{type:Array,require:!1}},methods:{editUser:function(e){this.$emit("showEdit",e)},deleteUser:function(e){console.log(e),this.$emit("deleteUser",e)}}},O=A,j=(r("e432"),Object(_["a"])(O,R,q,!1,null,"7a3650cf",null)),P=j.exports,B={components:{AddUsersDialog:E,UsersList:P},mounted:function(){this.getUser()},methods:{addUser:function(){this.getUser(),this.visible=!1},updateUser:function(){this.getUser(),this.visible=!1,console.log(123),this.chosenId=null},deleteUser:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("e",e),n=[],n.id=e,r.next=6,v["a"].deleteUser(Object(o["a"])({},n));case 6:t.getUser(),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),alert(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},getUser:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v["a"].getAll();case 3:e.users=t.sent,console.log(e.users),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},showEdit:function(e){this.chosenId=e._id,this.visible=!0}},data:function(){return{visible:!1,visibleEdit:!1,users:[],chosenId:null}}},I=B,T=Object(_["a"])(I,i,a,!1,null,null,null),N=T.exports,S=r("a2db"),D={components:{AdminComponent:N,AdminWrapper:S["a"]}},F=D,J=(r("3a9e"),Object(_["a"])(F,n,s,!1,null,null,null));t["default"]=J.exports},"3a9e":function(e,t,r){"use strict";r("553f")},"553f":function(e,t,r){},e432:function(e,t,r){"use strict";r("f1c0")},f1c0:function(e,t,r){}}]);